---
alwaysApply: false
description: Auto-update Linear issue statuses when performing task operations (starting work, creating PR, completing)
---
# Linear Issue Status Management

This rule guides the assistant to **automatically update Linear issue statuses** at key workflow milestones. Use this whenever working on Linear tasks (KIT-XXX).

// Memory: Status updates keep team informed and provide project visibility

## Status Transition Rules

### 1. When Starting Work on an Issue
**Trigger:** Creating a feature branch for a Linear issue
**Action:** Update issue status to `In Progress`

```typescript
// After creating branch: feature/KIT-XX-...
mcp_Linear_update_issue({
  id: "KIT-XX",
  state: "In Progress"
});
```

**Also:** Add a comment to the issue:
```
[YYYY-MM-DD] Started: Created feature branch, analyzing requirements
```
// Memory: Comments serve as chronological record of work progress

### 2. When Code is Ready for Review
**Trigger:** After pushing commits and before/after creating PR
**Action:** Update issue status to `In Review`

```typescript
// After: git push && gh pr create
mcp_Linear_update_issue({
  id: "KIT-XX",
  state: "In Review"
});
```

**Also:** Add a comment linking to the PR:
```
[YYYY-MM-DD] Ready for review: PR #XXX created
```
// Memory: PR links in comments make it easy to find related code changes

### 3. When User Confirms Fix is Working
**Trigger:** User confirms local testing passed or fix is working
**Action:** 
1. **First:** Commit and push changes (if not already done)
2. **Then:** Update issue status based on PR state:
   - If PR not yet created: Move to `In Review` after creating PR
   - If PR exists: Keep `In Review` status (wait for merge)
   - **Never move to `Done` before code is pushed**

```typescript
// After user confirms fix works:
// 1. Ensure code is committed and pushed
// 2. Then update status
mcp_Linear_update_issue({
  id: "KIT-XX",
  state: "In Review"  // Not Done yet - wait for PR merge
});
```
// Memory: User confirmation is valuable feedback, but code must be pushed before status update

### 4. When PR is Merged
**Trigger:** PR is merged to main
**Action:** Update issue status to `Done` (or `Completed`)

```typescript
// After PR merge confirmation
mcp_Linear_update_issue({
  id: "KIT-XX",
  state: "Done"
});
```

**Also:** Add a final comment:
```
[YYYY-MM-DD] Completed: PR merged, issue resolved
```
// Memory: Final comments close the loop and mark completion. Done status only after merge.

### 5. When Blocked or Paused
**Trigger:** Work paused or blocked (waiting for user, external dependency)
**Action:** Update issue status back to `Backlog` or keep `In Progress` with a comment explaining the pause.

```typescript
mcp_Linear_update_issue({
  id: "KIT-XX",
  state: "Backlog"  // or keep current state
});
// + comment explaining pause
```
// Memory: Blockage documentation helps identify recurring issues

### 6. When Reopening or Resuming
**Trigger:** Resuming work on a closed/completed issue
**Action:** Move back to `In Progress`

```typescript
mcp_Linear_update_issue({
  id: "KIT-XX",
  state: "In Progress"
});
```
// Memory: Reopening issues should be tracked to understand why initial fix was insufficient

## Status Mapping

Common Linear statuses (verify with team):
- `Backlog` → Initial/default state
- `Todo` → Ready to start
- `In Progress` → Actively working
- `In Review` → PR created, awaiting review
- `Done` / `Completed` → Merged/closed

// Memory: Status names may vary by team, always verify before using

**Note:** Exact status names may vary by team. Use `mcp_Linear_list_issue_statuses({ team: "Kitchen-kraft" })` to get accurate status names.

## Implementation Checklist

When working on any Linear task (KIT-XXX):

- [ ] **Step 2 (Create branch):** Update to `In Progress` + comment
- [ ] **Step 7 (Create PR):** Update to `In Review` + comment with PR link
- [ ] **After merge:** Update to `Done` + final comment
- [ ] **If blocked:** Comment and optionally revert status
- [ ] **Always:** Use issue ID from branch name or Linear URL

## Example Flow

1. User: "Fix KIT-21"
2. AI creates branch → Updates KIT-21 to `In Progress`
3. AI implements fix → Commits code
4. AI creates PR → Updates KIT-21 to `In Review`
5. User confirms fix works → **Ensure code is pushed** → Keep `In Review` (not Done yet!)
6. PR merged → Updates KIT-21 to `Done`

**Critical:** Never move to `Done` before code is pushed and PR is merged.

## Error Handling

- If status update fails, log warning but continue workflow
- If status name not found, use `mcp_Linear_list_issue_statuses` to get correct names
- Always verify issue ID before updating

## Memory Bank Guidelines for Linear Comments

### Comment Format
All Linear comments should follow this pattern to serve as effective memory:
```
[YYYY-MM-DD] <verb>: <concise description of action or decision>
```

### What to Document in Comments
1. **Decision points**: Why a particular approach was chosen
2. **Workarounds**: Temporary solutions and why they were needed
3. **Dependencies**: What other code/components this change affects
4. **Blockers**: What prevented progress and how it was resolved
5. **Testing notes**: Special cases or conditions to verify

### Example Memory Comments
```
[2025-11-03] Started: Created feature branch, analyzing requirements
[2025-11-03] Analyzed: Identified that tall cabinet rendering needs temporary removal
[2025-11-03] Implemented: Removed tall cabinet case from switch statement in tree-canvas.tsx
[2025-11-03] Tested: Verified tall cabinets no longer render in 3D scene
[2025-11-03] Ready for review: PR #9 created - https://github.com/dahura/kitchen-craft/pull/9
```

### When Resuming Work
1. Read all Linear comments for the issue
2. Check recent commits in the feature branch
3. Review any TODO items left in the code
4. Look for Memory comments explaining previous decisions

This approach ensures continuity of work and prevents repeating mistakes or losing context.
