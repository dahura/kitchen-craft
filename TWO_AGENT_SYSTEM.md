# üéØ Two-Agent System - Chat + Builder

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –ø—ã—Ç–∞–µ—Ç—Å—è –∏ –æ–±—â–∞—Ç—å—Å—è –∏ —Å—Ç—Ä–æ–∏—Ç—å, —Ç–µ–ø–µ—Ä—å **–¥–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞**:

### Agent 1: Chat Agent (–û–±—â–∞–µ—Ç—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
**–§–∞–π–ª**: `app/api/chat-agent/route.ts`  
**–†–æ–ª—å**: –†–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —Å–æ–±–∏—Ä–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è  
**Tools**: –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω - `buildKitchen(requirements)`  
**Endpoint**: `/api/chat-agent`

### Agent 2: Builder Agent (–°—Ç—Ä–æ–∏—Ç –∫—É—Ö–Ω–∏)
**–§–∞–π–ª**: `core/agent/builder-agent.ts`  
**–†–æ–ª—å**: –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ 7 —à–∞–≥–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫—É—Ö–Ω–∏  
**Tools**: –í—Å–µ kitchen tools (getMaterialLibrary, validateKitchenConfig, –∏ —Ç.–¥.)  
**–í—ã–∑–æ–≤**: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è Chat Agent'–æ–º

## –ö–∞–∫ –≠—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç

```
User: "–ü–æ—Å—Ç—Ä–æ–π –±–µ–ª—É—é –∫—É—Ö–Ω—é"
   ‚Üì
Chat Agent:
  - –ü–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –Ω—É–∂–Ω–∞ –∫—É—Ö–Ω—è
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: "white, modern style"
  - –í—ã–∑—ã–≤–∞–µ—Ç buildKitchen("white modern kitchen")
   ‚Üì
Builder Agent:
  1. getMaterialLibrary() ‚úì
  2. getModuleLibrary() ‚úì
  3. getRoomTextures() ‚úì
  4. Create KitchenConfig ‚úì
  5. validateKitchenConfig() ‚úì
  6. generateLayout() ‚úì
  7. saveKitchenConfig() ‚úì
   ‚Üì
Returns: { success: true, configId: "kitchen-XXX" }
   ‚Üì
Chat Agent:
  - –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  - –ì–æ–≤–æ—Ä–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: "–ö—É—Ö–Ω—è —Å–æ–∑–¥–∞–Ω–∞! ConfigID: kitchen-XXX"
   ‚Üì
Frontend:
  - –í–∏–¥–∏—Ç configId
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥
  - –†–µ–Ω–¥–µ—Ä–∏—Ç –∫—É—Ö–Ω—é! üéâ
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –û–¥–∏–Ω –∞–≥–µ–Ω—Ç –æ–±—â–∞–µ—Ç—Å—è, –¥—Ä—É–≥–æ–π —Å—Ç—Ä–æ–∏—Ç  
‚úÖ **–ë–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ**: Builder Agent —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ tools  
‚úÖ **–õ—É—á—à–µ –¥–ª—è debugging**: –Ø—Å–Ω–æ –≥–¥–µ —á—Ç–æ –ª–æ–º–∞–µ—Ç—Å—è  
‚úÖ **–ü—Ä–æ—â–µ –ø—Ä–æ–º–ø—Ç—ã**: –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç –ø—Ä–æ—Å—Ç—É—é –∑–∞–¥–∞—á—É  

## –§–∞–π–ª—ã

### –ù–æ–≤—ã–µ:
- `core/agent/builder-agent.ts` - Builder Agent
- `app/api/chat-agent/route.ts` - Chat Agent endpoint

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ:
- `app/(app)/(designer)/hooks/useAIChat.ts` - –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/chat-agent`

### –°—Ç–∞—Ä—ã–µ (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å):
- `app/api/agent/route.ts` - –°—Ç–∞—Ä—ã–π single-agent endpoint

## –ö–∞–∫ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

```bash
# 1. –£–±–µ–¥–∏—Å—å —á—Ç–æ VPN –≤–∫–ª—é—á—ë–Ω
# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ dev server
bun dev

# 3. –û—Ç–∫—Ä–æ–π http://localhost:3000
# 4. –í AI Chat –Ω–∞–ø–∏—à–∏: "–ø–æ—Å—Ç—Ä–æ–π –±–µ–ª—É—é –∫—É—Ö–Ω—é"
# 5. –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

üí¨ Chat Agent: Processing user message...
üîß Chat Agent calling: buildKitchen
üèóÔ∏è Builder Agent: Starting kitchen build...
üìã Requirements: white modern kitchen
Tool called: getMaterialLibrary
Tool called: getModuleLibrary
Tool called: getRoomTextures
Tool called: validateKitchenConfig
Tool called: generateLayout
Tool called: saveKitchenConfig
Saved kitchen configuration: kitchen-1234567890-abc123
‚úÖ Builder Agent: Kitchen built!
‚úÖ Tool result: { success: true, configId: "kitchen-1234567890-abc123" }

# 6. –í —á–∞—Ç–µ –≤–∏–¥–∏—à—å:
# "–ö—É—Ö–Ω—è —Å–æ–∑–¥–∞–Ω–∞! ConfigID: kitchen-1234567890-abc123"

# 7. –ö—É—Ö–Ω—è —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ 3D! ‚ú®
```

## Debugging

### Chat Agent –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç buildKitchen
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø—Ä–æ–º–ø—Ç Chat Agent'–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π. –û–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.

### Builder Agent –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–µ –≤—Å–µ tools
–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `üèóÔ∏è Builder Agent: Starting...`  
–ü–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫–∏–µ tools –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.

### ConfigId –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Builder Agent –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞.

### –ö—É—Ö–Ω—è –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ frontend –∏–∑–≤–ª–µ–∫–∞–µ—Ç configId –∏–∑ –æ—Ç–≤–µ—Ç–∞ Chat Agent'–∞.

## –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–º–µ—á–µ–Ω—ã —ç–º–æ–¥–∑–∏:
- üí¨ = Chat Agent
- üèóÔ∏è = Builder Agent  
- üîß = Tool call
- ‚úÖ = Success
- ‚ùå = Error

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å two-agent —Å–∏—Å—Ç–µ–º—É
2. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ 7 tools –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫—É—Ö–Ω—è —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
4. ‚úÖ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π `/api/agent` –µ—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**Status**: ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ  
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –ë–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞  
**Next**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∏ —Ç–µ—Å—Ç–∏—Ä—É–π!

